<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.shaoyx.mybatis.mapper.EmpMapper">
    <resultMap id="empDeptMapOne" type="Emp">
        <id column="emp_id" property="empName"/>
        <result column="emp_name" property="empName"/>
        <result column="age" property="age"/>
        <result column="gender" property="gender"/>
        <result column="dept_id" property="dept.deptId"/>
        <result column="dept_name" property="dept.deptName"/>
    </resultMap>

    <resultMap id="empDeptMapMany" type="Emp">
        <id column="emp_id" property="empName"/>
        <result column="emp_name" property="empName"/>
        <result column="age" property="age"/>
        <result column="gender" property="gender"/>
        <association property="dept" javaType="com.shaoyx.mybatis.pojo.Dept">
            <id column="dept_id" property="deptId"/>
            <result column="dept_name" property="deptName"/>
        </association>
    </resultMap>

    <select id="selectEmpById" resultType="com.shaoyx.mybatis.pojo.Emp">
        select *
        from t_emp
        where emp_id = #{empId,jdbcType=INTEGER}
    </select>

    <select id="getEmpAndDeptByEmpId" resultMap="empDeptMapMany">
        select te.*, td.*
        from t_emp te
                 join t_dept td on td.dept_id = te.dept_id

        where emp_id = #{empId,jdbcType=INTEGER}
    </select>


</mapper>